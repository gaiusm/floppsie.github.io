<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Sun Dec 31 14:41:05 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
 <link rel="stylesheet" type="text/css" href="/css/gp.css" />
 <link rel="icon" type="image/png" href="/graphics/gnu-groff-mini.png" />
</head>
<body bgcolor="#FFFFFF">



<p><a href="#index">Index</a></p>

<h2>1. Implementing a callback in PGE
<a name="1. Implementing a callback in PGE"></a>
</h2>


<p><ul type=disc> <li> in the PGE API there are callbacks
defined <ul type=square> <li> for example the
<tt><small>at_time</small></tt> method in the
<tt><small>event</small></tt> class </ul> <li></p>


<p><b><small><small><font color="#196633">$HOME/Sandpit/pge/python/pge.py</font></small></small></b></p>


<pre style="margin-top: 1em">def at_time (t, p):
    global idcount, id2func, slow_down_factor
    idcount += 1
    pgeif.create_function_event (t / slow_down_factor, idcount, 0)
    id2func[idcount] = p
    return idcount</pre>


<p><font color="#000000"></ul></font></p><hr>

<h2>2. at_time
<a name="2. at_time"></a>
</h2>


<p><font color="#000000"><ul type=disc> <li> informs the
physics engine to create a call to function, p, at time, t,
in the future <ul type=square> <li> it returns a integer
reference for the timed function. </ul> <li> pre-condition:
t is a time seconds (float) in the future.
<ul type=square> <li> <tt><small>p</small></tt> , is a
function which takes two parameters the first parameter is
the event and the second is an unused parameter <li> the
second parameter is only there to allow coexistance with
other call back functions </ul> <li> post-condition:
function <tt><small>p</small></tt> is placed into the timer
list and a timer id (integer) is returned <li> notice that
the function <tt><small>p</small></tt> is recorded into the
dictionary <tt><small>id2func</small></tt> and is referenced
by an integer <tt><small>idcount</small></tt> <li> the game
engine shared library ( <tt><small>twoDsim.c</small></tt> )
will, at the appropriate time, issue a request to the python
module to execute a function number <ul type=square> <li> it
does this by issuing a
<tt><small>function_event</small></tt> with a function id
which is the integer used to lookup the python function held
in the dictionary <li> see the method
<tt><small>_process</small></tt> in class
<tt><small>event</small></tt> in
<tt><small>pge.py</small></tt></font></p>

<p><font color="#000000"></ul> </ul></font></p><hr>

<h2>3. Implementing impulse_exceeds
<a name="3. Implementing impulse_exceeds"></a>
</h2>


<p><font color="#000000"><ul type=disc> <li> you can use
the ability of <tt><small>twoDsim.c</small></tt> to request
python calls a function to implement your
<tt><small>impulse_exceeds</small></tt> callback <li> hint
you might want introduce changes to the API in class
<tt><small>object</small></tt> <li></font></p>


<p><b><small><small><font color="#196633">$HOME/Sandpit/pge/python/pge.py</font></small></small></b></p>

<pre style="margin-top: 1em">#
#  impulse_exceeds - on collision if the impulse generated by this object
#                    (and the other object in collision)
#                    exceeds, value, call, function.
#                    function is a python function which takes a single
#                    parameter (param).  Param is the other object in
#                    collision.
#

def impulse_exceeds (self, value, function):
...</pre>

<p><font color="#000000"><li> you could propagate this call
though the various layers down to
<tt><small>twoDsim.c</small></tt> and implement this test
within the game engine <li> hint you might want to add new
fields to the object structure <li></font></p>

<pre>unsigned isImpulseActive;  /* a boolean indicating the exceed test is active.  */
long double impulseThreshold;  /* if the impulse exceeds the threshold call function.  */
unsigned int impulseCallback;  /* the integer function number.  */</pre>


<p><font color="#000000"><li> hint search for
<tt><small>hasCallBackLength</small></tt> in
<tt><small>twoDsim.c</small></tt> <ul type=square> <li> the
spring object can be set to snap if the spring exceeds a
value <li> it will call a function (should the spring exceed
a length) </ul> <li> very similar to exceeding an impulse
<ul type=square> <li> you can use similar code to implement
the impulse callback</font></p>

<p style="margin-top: 1em"><font color="#000000"></ul>
</ul></font></p> <hr>

<h2>Index
<a name="Index"></a>
</h2>



<p style="margin-top: 1em"><font color="#000000"><a name="index"></a></font></p>
<a href="#1. Implementing a callback in PGE">1. Implementing a callback in PGE</a><br>
<a href="#2. at_time">2. at_time</a><br>
<a href="#3. Implementing impulse_exceeds">3. Implementing impulse_exceeds</a><br>
<a href="#Index">Index</a><br>

<hr>

<p><font color="#000000"><i><small>This document was
produced using
<a href="http://groff.ffii.org/">groff-1.22</a>.</small></i></font></p> <hr>
</body>
</html>
